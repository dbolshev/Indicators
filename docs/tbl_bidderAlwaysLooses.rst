.. _tbl_bidderAlwaysLooses:

======================
tbl_bidderAlwaysLooses
======================

************************
Суть аналітичної таблиці
************************

Дана аналітична таблиця відображає учасників, що мають дуже великий процент програвань у процедурах.

*************************
Форма аналітичної таблиці
*************************

Аналітична таблиця містить наступну інформацію:

- Ідентифікатор постачальника

Приклад того, як може виглядати аналітична таблиця:

============== ======
Постачальник    
-------------- ------
Постачальник 1 
Постачальник 2 
Постачальник 3 
Постачальник 1 
Постачальник 2 
...            ...
============== ======

******************************
Розрахунок аналітичної таблиці
******************************

Джерела даних для розрахунку
============================

Для розрахунку аналітичної таблиці вікористовуються наступні джерела даних:

- API модуля тендеринга електронної системи закупівель

Частота розрахунку
==================

Аналітична таблиця розраховується раз на добу.

Поля для розрахунку
===================

Для розрахунку використовуються наступні поля з API модуля тендеринга:

- ``data.awards.status``
- ``data.awards.suppliers.identifier.scheme``
- ``data.awards.suppliers.identifier.id``
- ``data.bids.status``
- ``data.bids.tenderers.identifier.scheme``
- ``data.bids.tenderers.identifier.id``


Формула розрахунку
==================

1. Перед розрахунком аналітична таблиця очищується.

2. До уваги беруться усі процедури, у яких ``data.procurementMethodType`` мають бути ``aboveThresholdUA``, ``aboveThresholdEU``. Процедури повинні бути завершені, тобто ``data.status = 'complete'``

3. Для кожної процедури визначаємо її учасників (конкатенація ``data.bids.tenderers.identifier.scheme`` та ``data.bids.tenderers.identifier.id``) з об'єктів ``data.bids``, що мають ``data.bids.status = 'active'``.
   Також для процедури визначаємо усіх її переможців (конкатенація ``data.awards.suppliers.identifier.scheme`` та ``data.awards.suppliers.identifier.id``) в тих об'єктах, де ``data.awards.status = 'active'``.
   
4. Групуємо учасників по їх ідентифікатору (конкатенація ``data.bids.tenderers.identifier.scheme`` та ``data.bids.tenderers.identifier.id``), рахуючи кількість лотів або однолотових процедур, у яких він брав участь.
беремо до уваги тільки тих учасників, що мають від 3-х участей.

5. Групуємо переможців по їх ідентифікатору (конкатенація ``data.bids.tenderers.identifier.scheme`` та ``data.awards.suppliers.identifier.id``), рахуючи кількість лотів або однолотових процедур, у яких він переміг.
   
6. Для кожного учасника порівнюємо його кількість перемог (конкатенація ``data.bids.tenderers.identifier.scheme`` та ``data.bids.tenderers.identifier.id`` дорівнює конкатенації ``data.bids.tenderers.identifier.scheme`` та ``data.bids.tenderers.identifier.id``) та участей. Якщо кількість участей складає 10% або менше, заносимо учасника в таблицю.
 
