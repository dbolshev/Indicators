.. _tbl_dasu32:

==========
tbl_dasu32
==========

************************
Суть аналітичної таблиці
************************

Дана аналітична таблиця відображає усі завершені процедури, в яких документи визначення переможця не були позначені електронним підписом.

*************************
Форма аналітичної таблиці
*************************

Аналітична таблиця містить наступну інформацію:

- Ідентифікатор процедури

- Дату завершеня процедури

Приклад того, як може виглядати аналітична таблиця:

=========== ======
Процедура   Дата
----------- ------
Процедура 1 Дата 1
Процедура 2 Дата 2
Процедура 3 Дата 3
Процедура 4 Дата 4
Процедура 5 Дата 5
...         ...
=========== ======

******************************
Розрахунок аналітичної таблиці
******************************

Джерела даних для розрахунку
============================

Для розрахунку аналітичної таблиці вікористовуються наступні джерела даних:

- API модуля тендеринга електронної системи закупівель

Частота розрахунку
==================

Аналітична таблиця розраховується раз на добу.

Поля для розрахунку
===================

Для розрахунку використовуються наступні поля з API модуля тендеринга:

- ``data.date``
- ``data.``
- ``data.status``
- ``data.awards``
- ``data.awards.documents``
- ``data.awards.documents.format``
- ``data.awards.lotID``

Формула розрахунку
==================

1. Знаходимо останню дату процедури в таблиці - найбільше значення зі стовпчика ``date``. Нехай це буде "Дата останнього додавання".

2. До уваги беруться усі процедури, що мають ``data.status = 'complete'``, ``data.procurementMethodType = 'above ThresholdUA'`` або ``data.procurementMethodType = 'above ThresholdEU'`` та ``data.date`` більше за "Дату останнього додавання".

3. Усі документи з блоку ``data.awards.documents``, де ``data.awards.status = 'active'``, перевіряються на предмет їх формату ``data.awards.documents.format``

4. Якщо в блоці ``data.awards.documents`` нема жодного документу з форматом ``application/pkcs7-signature``, то ідентифікатор процедури ``data.id`` та її ``data.date`` додаэться як новий рядок у таблицю. 

