.. _tbl_countOfAwardsAndDisquals:

============================
tbl_countOfAwardsAndDisquals
============================

************************
Суть аналітичної таблиці
************************

Дана аналітична таблиця відображає кількість дискваліфікацій та наявнисть переможця у лоті.

*************************
Форма аналітичної таблиці
*************************

Аналітична таблиця містить наступну інформацію:

- Ідентифікатор процедури

- Ідентифікатор лота

- Наявність переможця у лоті

- Кількість дискваліфікацій у лоті

Приклад того, як може виглядати аналітична таблиця:

=========== ===== ========== ===============
Процедура   Лот   Переможець Дискваліфікації
----------- ----- ---------- ---------------
Процедура 1 Лот 1      1            4
Процедура 1 Лот 2      1            0
Процедура 1 Лот 3      1            0
Процедура 2 Лот 1      0            2
Процедура 2 Лот 2      1            1
...         ...   ...        ...
=========== ===== ========== ===============

******************************
Розрахунок аналітичної таблиці
******************************

Джерела даних для розрахунку
============================

Для розрахунку аналітичної таблиці вікористовуються наступні джерела даних:

- API модуля тендеринга електронної системи закупівель

Частота розрахунку
==================

Аналітична таблиця розраховується раз на добу.

Поля для розрахунку
===================

Для розрахунку використовуються наступні поля з API модуля тендеринга:

- ``data.id``

- ``data.lots.id``

- ``data.awards.status``

- ``data.status``

Формула розрахунку
==================

1. Перед розрахунком аналітична таблиця очищується.

2. До уваги беруться усі процедури, у яких ``data.procurementMethodType`` мають бути ``aboveThresholdUA`` або ``aboveThresholdEU``. Процедури повинні мати статус ``data.status = 'active.qualification'`` або ``data.status = 'active.awarded'``

3. Для кожного лота (``data.lots.id``) перевіряється наявність преможця - наявність в процедурі ``data.id`` об'єкта ``data.awards``, де  ``data.awards.status = 'active'``, що посилається на лот по ``data.awards.lotID = data.lots.id``. Якщо такий об'єкт є, то значення "Переможець" в таблиці стає "``1``", інакше - "``0``".

4. Для кожного лота (``data.lots.id``) перевіряється кількість дискваліфікацій - наявність в процедурі ``data.id`` об'єктів ``data.awards``, де  ``data.awards.status = 'unsuccessful'``, що посилаються на лот по ``data.awards.lotID = data.lots.id``. Кількість таких об'єктів заноситься у поле "Дискваліфікації".



