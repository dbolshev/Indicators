.. _tbl_winnedLotsWithDisquals:

==========================
tbl_winnedLotsWithDisquals
==========================

************************
Суть аналітичної таблиці
************************

Дана аналітична таблиця відображає скільки лотів у тендері виграв постачальник та чи були у лотах дискваліфікації.

*************************
Форма аналітичної таблиці
*************************

Аналітична таблиця містить наступну інформацію:

- Ідентифікатор процедури

- Ідентифікатор постачальника, що виграв хоча б один лот процедури

- Кількість лотів, які виграв постачальник в цій процедурі

- Чи були у дискваліфікації у процедурі

Приклад того, як може виглядати аналітична таблиця:

=========== ============== ======================== ===============
Процедура   Постачальник   Кількість виграних лотів Дискваліфікації
----------- -------------- ------------------------ ---------------
Процедура 1 Постачальник 1            1                    0
Процедура 1 Постачальник 2            2                    0
Процедура 1 Постачальник 3            1                    0
Процедура 2 Постачальник 1            5                    1
Процедура 2 Постачальник 2            1                    1
...         ...            ...                      ...
=========== ============== ======================== ===============

******************************
Розрахунок аналітичної таблиці
******************************

Джерела даних для розрахунку
============================

Для розрахунку аналітичної таблиці вікористовуються наступні джерела даних:

- API модуля тендеринга електронної системи закупівель

Частота розрахунку
==================

Аналітична таблиця розраховується раз на добу.

Поля для розрахунку
===================

Для розрахунку використовуються наступні поля з API модуля тендеринга:

- ``data.id``

- ``data.awards.suppliers.identifier.id``

- ``data.awards.status``

- ``data.status``

Формула розрахунку
==================

1. Перед розрахунком аналітична таблиця очищується.

2. До уваги беруться усі процедури, у яких ``data.procurementMethodType`` мають бути ``belowThreshold``, ``aboveThresholdUA`` або ``aboveThresholdEU``. Процедури повинні мати статус ``data.status = 'active.qualification'`` або ``data.status = 'active.awarded'``

3. Для кожного постачальника (``data.awards.suppliers.identifier.id``) вираховується кількість його перемог у лотах процедури (однакові ``data.awards.suppliers.identifier.id`` при ``data.awards.status = 'active'``).

4. Для процедури розраховується логічна змінна, чи були дискваліфікації. Якщо в блоці ``awards`` присутній хоча б один об'єкт з ``data.awards.status = 'unsuccessful'`, то значення змінної стає "``1``".



